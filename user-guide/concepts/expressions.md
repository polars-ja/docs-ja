# エクスプレッション

Polars には、非常に高速なパフォーマンスの中心となる強力な概念であるエクスプレッションがあります。

エクスプレッションは、多くのデータサイエンス操作の中核にあります:

- カラムからの行のサンプリング
- カラム内の値の乗算
- 日付からの年のカラムの抽出
- 文字列カラムを小文字に変換
- などなど!

しかし、エクスプレッションは他の操作でも使用されます:

- `group_by` 操作でのグループの平均の取得
- `group_by` 操作でのグループサイズの計算
- 列にわたる合計の取得

Polars は、これらのコアデータ変換を以下によって非常に高速に実行します:

- 各エクスプレッションの自動クエリ最適化
- 多数のカラムでのエクスプレッションの自動並列化

エクスプレッションは、1つ以上の Series を構築する方法を記述する操作のツリーです。出力が Series であるため、前のステップからの出力を変換する一連のエクスプレッション（pandas のメソッドチェーンに似ています）を簡単に適用できます。

これが抽象的で混乱しているように感じられる場合は心配しないでください! 人々は、いくつかの例を見るだけで、エクスプレッションに対する直感を素早く身につけます。次にそれを行いましょう!

## 例

以下はエクスプレッションです:

{{code_block('user-guide/concepts/expressions','example1',['col','sort','head'])}}

上記のスニペットは以下のことを意味しています:

1. "foo" カラムを選択する
1. その後、カラムをソートする（逆順ではない）
1. ソート済みの出力の最初の2つの値を取得する

エクスプレッションの力は、すべてのエクスプレッションが新しいエクスプレッションを生成し、それらを_パイプ_できることです。 Polars の実行コンテキストの1つに渡してエクスプレッションを実行できます。

ここでは `df.select` を使って2つのエクスプレッションを実行しています:

{{code_block('user-guide/concepts/expressions','example2',['select'])}}

すべてのエクスプレッションは並列に実行されるため、個別の Polars エクスプレッションは**恥ずかしいほど並列**です。ただし、エクスプレッション内部でさらに並列化が行われる可能性があることに注意してください。

## 結論

可能なエクスプレッションの氷山の一角にすぎません。さらに多くのものがあり、さまざまな方法で組み合わせることができます。このページは、[エクスプレッション](../expressions/operators.md)のセクションで深く掘り下げていく前に、エクスプレッションの概念に慣れていただくことを目的としています。
